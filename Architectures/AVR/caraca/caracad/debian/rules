#!/usr/bin/make -f
# Copyright 1994,1995 by Ian Jackson.

export DH_VERBOSE=1
# This is the debhelper compatability version to use.
export DH_COMPAT=1
# This has to be exported to make some magic below work.
export DH_OPTIONS

clean:
	dh_testdir
	dh_clean
	rm -f build
#	rm -f build-indep build-arch
	-$(MAKE) -i clean
	rm -rf *~ debian/tmp debian/*~ debian/files* debian/substvars

# These two are only usefull if you can selectively
# install for arch and indep stuff.
install-arch:
#	ch_clean -k -a
#	dh_installdirs -a

install-indep:
#	ch_clean -k -i
#	dh_installdirs -i

install: install-arch install-indep
#	dh_clean
	dh_installdirs
	$(MAKE) CFLAGS=-O2 LDFLAGS=-s INSTALL_PROGRAM='install -c -s' \
		prefix=`pwd`/debian/tmp install

# These two are only usefull if you can selectively
# build for arch and indep stuff.
build-indep: install-indep
#	touch build-indep

build-arch: install-arch
#	touch build-arch

build: build-arch build-indep
	$(MAKE) #CFLAGS=-O2 LDFLAGS=
	touch build

binary-indep: install
# There are no architecture-independent files to be uploaded
# generated by this package.  If there were any they would be
# made here.

binary-arch: DH_OPTIONS=-a
binary-arch: install
	dh_testdir 
	dh_testroot
	dh_installdebconf
#	dh_movefiles
#	dh_installdocs
#	dh_installmenu
	dh_installinit -- 30    #Start after ssh....
	dh_installdeb 
#	dh_installcron
#	dh_installmanpages
	dh_undocumented
#	dh_installchangelogs  # ChangeLog
#	dh_strip
	dh_makeshlibs
	dh_compress
	dh_fixperms
#	dh_suidregister
	dh_installdeb
	dh_shlibdeps 
	dh_gencontrol
	dh_md5sums
#	dh_dirsizes
	dh_builddeb


# Below here is fairly generic really

binary:		binary-indep binary-arch

.PHONY: binary binary-arch binary-indep clean checkroot
